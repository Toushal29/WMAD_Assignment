{% extends 'web_app/main_page/base.html' %}
{% block title %}Reservation{% endblock %}
{% block extra_css %}
{% load static %}
<link rel="stylesheet" href="{% static 'web_app/css/reservation.css' %}">
<style>
    body{
        background-image: url("{% static 'web_app/images/bk_img5.png' %}");
        background-repeat: no-repeat;
        background-size: cover;
        background-position:center;
        min-height: 100vh;
        margin: 0;
    }
</style>
{% endblock %}

{% block content %}

<div class="reservation-container">

    {% if not request.user.is_authenticated %}
        <!-- Not Logged In -->
        <h1>Reserve a Table</h1>
        <p>You must be logged in to make an online reservation.</p>

        <div class="login-prompt">
            <a href="/login/" class="login-btn">Log In to Reserve</a>
        </div>

        <div class="whatsapp-container">
            <p>Or reserve quickly via WhatsApp!</p>
            <a class="whatsapp-btn"
                href="https://wa.me/23059220512?text=Hello%20I%20want%20to%20make%20a%20reservation"
                target="_blank">
                WhatsApp Reservation
            </a>
        </div>

        <p class="reservation-info">
            You can also call us or send a message to check table availability.
        </p>

    {% else %}
        <!-- Logged In User -->
        <h1>Make A Reservation</h1>
        <p>Welcome, {{ request.user.first_name }} {{ request.user.last_name }}!  
           Fill the form below to reserve a table.</p>

        <form action="{% url 'reservation' %}" method="post" class="reservation-form">
            {% csrf_token %}

            <label>Name of Reservation:</label>
            <input type="text" value="{{ request.user.first_name }}" readonly>
            <input type="text" value="{{ request.user.last_name }}" readonly>

            <label>Phone Number:</label>
            <input type="text" value="{{ request.user.phone_no }}" readonly>

            <!-- Grouped Row -->
            <div class="r-flex-row">

                <div class="r-flex-item">
                    <label>Party Size:</label>
                    <input type="number" name="party_size" min="1" max="15" required>
                </div>

                <div class="r-flex-item">
                    <label>Date:</label>
                    <input type="date" name="reservation_date" required>
                </div>

                <div class="r-flex-item">
                    <label>Time:</label>
                    <input type="time" name="reservation_time" required>
                </div>

            </div>

            <label>Indoor/Outdoor Seating:</label>
            <div class="radio-group">
                <label><input type="radio" name="seating_choice" value="Indoor" required> Indoor</label>
                <label><input type="radio" name="seating_choice" value="Outdoor"> Outdoor</label>
            </div>

            <label>Allergy Information (optional):</label>
            <textarea name="allergy_info" rows="4"></textarea>

            <button type="submit" class="reservation-btn">Confirm Reservation</button>
        </form>

        <!-- WhatsApp Option Still Visible -->
        <div class="whatsapp-container">
            <p>Prefer WhatsApp? Reserve instantly:</p>
            <a class="whatsapp-btn"
                href="https://wa.me/23059220512?text=Hello%20I%20want%20to%20make%20a%20reservation"
                target="_blank">
                Make reservation via WhatsApp
            </a>
        </div>

    {% endif %}

</div>

{% endblock %}
