{% extends 'web_app/main_page/base.html' %}
{% load static %}

{% block title %}Menu{% endblock %}

{% block extra_css %}
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'web_app/css/menu.css' %}">
<style>
    * { text-decoration: none; margin: 0; padding: 0; }
    body {
        font-family: 'Poppins', sans-serif;
        color: #fff;
        background-image: url("{% static 'web_app/images/bk_img6.png' %}");
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        min-height: 100vh;
        margin: 0;
        overflow: hidden;
    }
</style>
{% endblock %}

{% block content %}
<h1 class="menu-title">Our Menu</h1>

<div class="menu-container">
    <div class="menu-grid">
        {% for item in items %}
        <div class="menu-card"
            data-name="{{ item.menuName }}"
            data-description="{{ item.description }}"
            data-price="{{ item.price }}"
            data-image="{{ item.image_url.url }}">
            {% if item.image_url %}
            <img src="{{ item.image_url.url }}" class="menu-image" alt="{{ item.menuName }}">
            {% endif %}
            <h3>{{ item.menuName }}</h3>
            <p>{{ item.description|truncatechars:60 }}</p>
            <p class="price">Rs {{ item.price }}</p>
        </div>
        {% endfor %}
    </div>
</div>

<div class="global-order-btn-container">
    <a href="{% url 'order' %}" class="global-order-btn">Order Now</a>
</div>

<div class="modal-overlay" id="modal">
    <div class="modal-box">
        <span class="modal-close">&times;</span>
        <img id="modal-img">
        <h2 id="modal-name"></h2>
        <p id="modal-description"></p>
        <p id="modal-price"></p>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.menu-card');
    const modal = document.getElementById('modal');
    const modalImg = document.getElementById('modal-img');
    const modalName = document.getElementById('modal-name');
    const modalDesc = document.getElementById('modal-description');
    const modalPrice = document.getElementById('modal-price');
    const modalClose = document.querySelector('.modal-close');

    cards.forEach(card => {
        card.addEventListener('click', () => {
            modalImg.src = card.dataset.image;
            modalName.textContent = card.dataset.name;
            modalDesc.textContent = card.dataset.description;
            modalPrice.textContent = "Rs " + card.dataset.price;
            modal.style.display = 'flex';
        });
    });

    modalClose.onclick = () => modal.style.display = 'none';
    modal.onclick = (e) => { if(e.target === modal) modal.style.display = 'none'; };
});
</script>

{% endblock %}
